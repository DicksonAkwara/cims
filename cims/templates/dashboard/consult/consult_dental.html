{% extends "partials/base.html" %}
{% block title %}Consult | Dentistry{% endblock %}
{% load static %}
{% load crispy_forms_tags %} <!--loading crispy forms-->
{% block content %}
     
<!--navbar.html-->
{% include 'partials/cons_nav.html'%}
<div class="container-fluid" id="main">
        <div class="container-fluid">
            <div class="row mt-2">
             <div class="col-md-12 col-sm-12 h-100">
               <div class="card h-100">
                 <div class="card-header">.
                    <div class="row">
                          <div class="col-sm-4">
                            <div class="input-group input-group-sm mb-3">                                                            
                              <div class="input-group-prepend">
                                <span class="input-group-text">Patient category</span>
                              </div> 
                              <select class="form-control form-control-sm form-select" id="pat_type">                              
                                {% for item in patType %}
                                <option value="{{item.category}}">{{item.category}}</option>
                                {%endfor%}                                
                              </select>
                            </div>
                          </div>
                        
                        <div class="col-sm-3">
                            <button class="btn btn-sm btn-warning" id="btnwaitlist">Waiting Queue</button>
                        </div>
                        <div class="col-sm-3">
                          <h6 class="text-danger" id="fname2"></h6>
                        </div>
                    </div>
                 </div>
               </div>
   
             </div>
             <div class="col-md-12 col-sm-12 h-100">
               <div class="border p-3 bg-white">
                  <div class="row mt-3">
                   <div class="col-md-12">
                     <div id="accordion">
                        <div class="card">
                            <div class="card-header" id="headingpat">
                              <h5 class="mb-0">
                                <button class="btn btn-link collapsed text-decoration-none" id="btn_pat_det" data-toggle="collapse" data-target="#collapsePat" aria-expanded="false" aria-controls="collapsePat">
                                  Patient Details
                                </button>
                              </h5>
                            </div>                  
                            <div id="collapsePat" class="collapse" aria-labelledby="headingpat" data-parent="#accordion">
                              <div class="card-body">
                                <div class="row mt-2">

                                    <div class="col-sm-4">
                                        <div class="input-group input-group-sm mb-3">                                                            
                                          <div class="input-group-prepend">
                                            <input id="cl_patid" type="text" hidden>
                                            <span class="input-group-text">Fullname</span>
                                          </div> 
                                          <input class="form-control form-control-sm" readonly type="text" id="fname">
                                        </div>
                                      </div>

                                    <div class="col-sm-4">
                                        <div class="input-group input-group-sm mb-3">                                                            
                                            <div class="input-group-prepend">
                                              <input id="vno" type="text" hidden>
                                              <span class="input-group-text">Card Number</span>
                                            </div> 
                                            <input class="form-control form-control-sm" readonly type="text" id="cardno" >
                                          </div>
                                       </div>

                                       <div class="col-sm-4">
                                        <div class="input-group input-group-sm mb-3">                                                            
                                            <div class="input-group-prepend">
                                              
                                              <span class="input-group-text">Age(yrs)</span>
                                            </div> 
                                            <input class="form-control form-control-sm" readonly type="text" id="ptage" >
                                          </div>
                                       </div>

                                       <div class="col-sm-4">
                                        <div class="input-group input-group-sm mb-3">                                                            
                                            <div class="input-group-prepend">                                              
                                              <span class="input-group-text">Gender</span>
                                            </div> 
                                            <input class="form-control form-control-sm" readonly type="text" id="ptgender" >
                                          </div>
                                       </div>

                                       <div class="col-sm-4">
                                        <div class="input-group input-group-sm mb-3">                                                            
                                            <div class="input-group-prepend">                                              
                                              <span class="input-group-text">Paymode</span>
                                            </div> 
                                            <input class="form-control form-control-sm" readonly type="text" id="pmode" >                         
                                            <input readonly type="text" id="pmode2"  hidden>
                                          </div>
                                       </div>

                                       <div class="col-sm-4">
                                        <input class="btn btn-info btn-sm form-control" type="button" id="vtcard" value="View Previous Visits">
                                     </div>

                                     </div>  
                                                                    
                              </div>
                            </div>
                          </div>

                       <div class="card">
                         <div class="card-header" id="headingOne">
                           <h5 class="mb-0">
                             <button class="btn btn-link collapsed text-decoration-none" id="btn_triage_det" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                               Triage Details
                             </button>
                           </h5>
                         </div>                  
                         <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
                           <div class="card-body">
                            <div style="max-height:300px;overflow-y:scroll;" >
                              <table class="table table-sm table-bordered table-fixed triageTable">
                                <thead style="position: sticky;top: 0" class="thead-dark">
                                      <th >DateTime</th>
                                      <th >Urgency</th>
                                      <th >Temp.(c)</th>
                                      <th >B.Pressure(mm/hg)</th>
                                      <th >Pulse(b/m)</th>
                                      <th >Weight(kg)</th>
                                      <th >Height(cm)</th>
                                    </thead>
                                  <tbody class='triageTableBody'>
                               
                                  </tbody>
                              </table>
                          </div>
                           </div>
                         </div>
                       </div>
   
                       <div class="card">
                         <div class="card-header" id="headingTwo">
                           <h5 class="mb-0">
                             <button class="btn btn-link collapsed text-decoration-none" id="btnOpenClerk" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                               Clerking Notes
                             </button>
                           </h5>
                         </div>
                         <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                           <div class="card-body">
                            
                            <div id="divDental">
                              <form id="dentalForm">
                                {% csrf_token %}
                              <div class="row">
                                <div class="col-sm-4">
                                  <div class="card h-100">
                                    <div class="card-header bg-secondary text-light">
                                      Oral Complains, physical exam &amp; findings
                                    </div>
                                    <div class="card-body">
                                      <input type="text" name="spid" id="spid1" hidden>
                                      <input type="text" name="sclname" id="sclname1" hidden>
                                      <input type="text" id="consnumber" name="consnumber" hidden>
                                     
                                      <textarea class="form-control" style="height:100%;" placeholder="enter notes here" name="compExFind" rows="8"></textarea>
                                    </div>
                                  </div>
                                </div>
                                <div class="col-sm-4">
                                  <div class="card h-100">
                                    <div class="card-header bg-secondary text-light">
                                      Specific Tooth
                                    </div>
                                    <div class="card-body">
                                      <div class="form-group">
                                        <select class="form-control form-control-sm" id="denpatcat" name="denpatcat">
                                          <option value="none">--Select patient category--</option>
                                          <option value="Adult">Adult</option>
                                          <option value="peads">paediatric</option>
                                        </select>
                                      </div>
                                      <div class="form-group" style="display: none;" id="denUpperAdldiv">
                                        <select class="form-control form-control-sm" id="denUpperAdult">
                                          <option value="none">--Upper--</option> 
                                          <option value="11">11</option>
                                          <option value="12">12</option>
                                          <option value="13">13</option>
                                          <option value="14">14</option>
                                          <option value="15">15</option>
                                          <option value="16">16</option>
                                          <option value="17">17</option>
                                          <option value="18">18</option>
                                          <option value="19">19</option>
                                          <option value="20">20</option>
                                          <option value="21">21</option>
                                          <option value="22">22</option>
                                          <option value="23">23</option>
                                          <option value="24">24</option>
                                          <option value="25">25</option>
                                          <option value="26">26</option>
                                          <option value="27">27</option>                                       
                                          <option value="28">28</option>                                       
                                        </select>
                                      </div>
                                      <div class="form-group" style="display: none;" id="denLowerAdldiv">
                                        <select class="form-control form-control-sm" id="denLowerAdult">
                                          <option value="none">--Lower--</option> 
                                          <option value="41">41</option>
                                          <option value="42">42</option>
                                          <option value="43">43</option>
                                          <option value="44">44</option>
                                          <option value="45">45</option>
                                          <option value="46">46</option>
                                          <option value="47">47</option>
                                          <option value="48">48</option>
                                          <option value="31">31</option>
                                          <option value="32">32</option>
                                          <option value="33">33</option>
                                          <option value="34">34</option>
                                          <option value="35">35</option>
                                          <option value="36">36</option>
                                          <option value="37">37</option>
                                          <option value="38">38</option>                                       
                                        </select>
                                      </div>

                                      <div class="form-group" style="display: none;" id="denUpperPeaddiv">
                                        <select class="form-control form-control-sm" id="denUpperPead">
                                          <option value="none">--Upper--</option> 
                                          <option value="51">51</option>
                                          <option value="52">52</option>
                                          <option value="53">53</option>
                                          <option value="54">54</option>
                                          <option value="55">55</option>
                                          <option value="61">61</option>
                                          <option value="62">62</option>
                                          <option value="63">63</option>
                                          <option value="64">64</option>
                                          <option value="65">65</option>                                       
                                        </select>
                                      </div>
                                      <div class="form-group" style="display: none;" id="denLowerPeaddiv">
                                        <select class="form-control form-control-sm" id="denLowerPead">
                                          <option value="none">--Lower--</option> 
                                          <option value="81">81</option>
                                          <option value="82">82</option>
                                          <option value="83">83</option>
                                          <option value="84">84</option>
                                          <option value="85">85</option>
                                          <option value="71">71</option>
                                          <option value="72">72</option>
                                          <option value="73">73</option>
                                          <option value="74">74</option>
                                          <option value="75">75</option>                                       
                                        </select>
                                      </div>
                                      <div class="form-group">
                                        <label>Tooth selected</label>
                                        <input type="text" name="thselect" id="thselect" class="form-control form-control-sm border-info">
                                      </div>                                    
                                    </div>
                                  </div>
                                </div>
                                 <div class="col-sm-4">
                                  <div class="card h-100">
                                    <div class="card-header bg-secondary text-light">
                                      Procedure &amp; Notes
                                    </div>
                                    <div class="card-body">
                                      <div class="form-group">
                                        <label>Condition/Diagnosis</label>
                                        <select class="form-control form-control-sm" id="dencondition" name="dencondition">
                                          <option value="none">select</option>
                                          {% for cond in dentcond %}
                                          <option value="{{cond.conditionName}}">{{cond.conditionName}}</option>
                                          {% endfor%}
                                        </select>
                                      </div>
                                      <div class="form-group">
                                        <label>Procedure Done</label>
                                        <input list="encodings" value="" placeholder="Type to search..." id="denprocedure" name="denprocedure" class="col-sm-12 custom-select custom-select-sm">
                                         <datalist id="encodings">
                                          <option value="none">select</option>
                                          {% for proc in dentproc %}                                          
                                          <option value="{{proc.procedureName}}">{{proc.procedureName}}</option>
                                          {% endfor%} 
                                         </datalist>
                                      </div>
                                      <div class="form-group">
                                        <textarea class="form-control" placeholder="additional notes" id="additionNotes" name="additionDentalNotes" rows="5"></textarea>
                                      </div>                                    
                                    </div>
                                  </div>
                                </div>                              
                              </div>
                              <div class="row mt-3">
                                <div class="col-sm-4"></div>
                                <div class="col-sm-4">
                                  <input type="button" class="btn btn-sm btn-success form-control" id="submitDental" value="Save clerking Details">
                                </div>
                                <div class="col-sm-4"></div>
                                
                              </div>
                              </form>
                            </div>
                             
                           </div>
                         </div>
                       </div>
   
                       <!--<div class="card">
                         <div class="card-header" id="headingThree">
                           <h5 class="mb-0">
                             <button class="btn btn-link collapsed text-decoration-none" id="btn_diagnosis" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                               Diagnosis
                             </button>
                           </h5>
                         </div>
                         <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                           <div class="card-body">
                             <div class="row">
                               <div class="col-sm-12">
                                 <form>
                                   <div class="row">
                                     <div class="col-sm-5">
                                       <div class="form-group">
                                         <select name="diag_type" id="diag_type" class="form-control">
                                           <option selected>Select....</option>
                                           <option value="Provisional">Provisional</option>
                                           <option value="Confirmed">Confirmed</option>
                                                                                         
                                         </select>
                                       </div>
                                     </div>
                                     <div class="col-sm-7">
                                       <div class="form-group">
                                         <div class="input-group">
                                           <input class="form-control" type="text" id="search_diag" autocomplete="off" placeholder="search diagnosis" >
                                           <span class="input-group-text">&#128269;</span>
                                          </div>
                                       </div>
                                     </div>
                                   </div> 
                                   <div class="row">
                                     <div class="col-md-12 mt-2">                                    
                                       <table class="table table-hover table-sm" id="diagOutputSvs">
                                         <thead>
                                           <tr>                                                   
                                           </tr>
                                         </thead>
                                         <tbody class="diagOutputSvsBody">
                               
                                         </tbody>
                                       </table>
                                     </div>
                     
                                   </div>                               
                                 </form>                            
                               </div>
                             </div>
                           </div>
                         </div>
                       </div>-->
   
                       <div class="card">
                         <div class="card-header" id="headingFour">
                           <h5 class="mb-0">
                             <button class="btn btn-link collapsed text-decoration-none" id="btn_service" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                               Service/Test/Image/Prescription Request
                             </button>
                           </h5>
                         </div>
                         <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordion">
                           <div class="card-body">
                             <div class="row">
                               <div class="col-sm-6">
                                 <div class="form-group">                            
                                   <select name="operation" id="operation" class="form-control bg-info text-light">
                                     <option selected="true" disabled="disabled" >Select Operation..</option>
                                     <option value="1">Nursing Request</option>                                  
                                     <option value="2">Lab Request</option>
                                     <option value="3">Radiology Request</option> 
                                     <option value="4">Drugs Prescription</option>
                                     <option value="5">Admission Request</option>
                                     <option value="6">Clinic Booking</option>
                                     <option value="7">General Service</option>                                                
                                     <option value="8">Referral in/out</option>                                                
                                   </select>
                               </div>
                               </div>
                               <div class="col-sm-6">
                                 <input type="button" class="btn btn-success float-right" id="btn_confirm_request" value="Confirm request">
                               </div>
                             </div>
                            
                           <div class="row">
                             <div class="col-md-12 mt-2">
                               
                               <table class="table table-hover table-sm" id="billOutputSvs" style="display:none;">
                                 <thead>
                                   <tr>                              
                                     <th scope="col">Service Name</th>
                                     <th scope="col">Cost</th>                    
                                     <th scope="col">Department</th>                 
                                   </th>                                  
                                   </tr>
                                 </thead>
                                 <tbody class="billOutputSvsBody">                    
                                 </tbody>
                               </table>
   
                               <table class="table table-hover table-sm" id="pharOuttable" style="display:none;">
                                 <thead>
                                   <tr>                              
                                     <th scope="col">Drug/Item Name</th>
                                     <th scope="col">Dosage</th>                    
                                     <th scope="col">Frequency</th>                 
                                     <th scope="col">Days</th>                                   
                                     <th scope="col">Qnt.Presc</th> 
                                     <th scope="col">Available</th>
                                     <th scope="col">Counter</th>
                                     
                                   </tr>
                                 </thead>
                                 <tbody class="pharOuttableBody">                    
                                 </tbody>
                               </table>
   
                               <div style="display: none;" id="admdiv">
                                 <form>
                                   <div class="form-group">  
                                        <select id="ward" class="form-control">
                                         <option value="" selected="true" disabled="disabled">select inpatient ward to admit</option>
                                         {% for ward in wards %}
                                          <option value="{{ward}}">{{ward}}</option>
                                         {% endfor %}
                                        </select>               
                                     
                                   </div>
                                   <div class="form-group">
                                     <textarea class="form-control" placeholder="enter admission notes here" id="admitNotes" rows="5"></textarea>
                                   </div>
                                 </form>
                               </div>
                               <div style="display: none;"  id="clinicBook">
                                 <div class="row">                                
                                     <div class="col-sm-4">
                                       <div class="form-group">
                                         <label>Preferred clinic Date</label>
                                         <input type="date" class="form-control form-control-sm" name="pdate" id="prdate"><!-- had a jquery date picker-->
                                       </div>
                                     </div>
                                     <div class="col-sm-4">
                                       <div class="form-group">
                                         <label>Booking Type</label>
                                         <select class=" form-control form-control-sm" id="bkType">
                                           <option value="" selected="true" disabled="disabled">-----</option>
                                           <option value="Normal">Normal</option>
                                           <option value="Urgent">Urgent</option>
                                         </select>
                                       </div>
                                     </div>
                                     <div class="col-sm-4">
                                       <div class="form-group">
                                         <label>Clinic/Department</label>
                                         <select class=" form-control form-control-sm" id="bkDept">
                                           <option value="" selected="true" disabled="disabled">-----</option>
                                           {% for clinic in clinics %}
                                            <option value="{{clinic}}">{{clinic}}</option>
                                           {% endfor %}                                                                               
                                         </select>   
                                        </div>
                                     </div>
                                   
                                 </div>
                                 <div class="row">
                                   <div class="col-sm-12">
                                     <div class="form-group">
                                       <textarea class="form-control form-control-sm" placeholder="enter additional notes here" id="clinicNotes" rows="3"></textarea>
                                     </div>
                                   </div>
                                   
                                 </div>
                               </div>
   
                             </div>
             
                           </div>                         
                           </div>
                         </div>
                       </div>
   
                       <div class="card">
                         <div class="card-header" id="headingFive">
                           <h5 class="mb-0">
                             <button class="btn btn-link collapsed text-decoration-none" data-toggle="collapse" data-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                               Diagonistic Results
                             </button>
                           </h5>
                         </div>
                         <div id="collapseFive" class="collapse" aria-labelledby="headingFive" data-parent="#accordion">
                           <div class="card-body">
                             <div class="row">
                               <div class="col-sm-4">
                                 <div class="form-group">
                                   <input type="button" class="btn form-control btn-secondary" id="btnLabRes" value="Laboratory Results">
                                 </div> 
                                 <div class="form-group">
                                   <input type="button" class="btn form-control btn-secondary mt-2" id="btnRadRes" value="Radiology Notes">
                                 </div> 
                               </div>
                               
                               <div class="col-sm-8">
                                 <input type="text"  id="resDept" hidden>
                                 <table class="table table-hover table-sm resOutputSvs" id="resOutputSvs">
                                   <thead>
                                     <tr>                     
                                      <th scope="col" style="display:none;">code</th>
                                       <th scope="col">Date</th>
                                       <th scope="col">Service</th>                                                  
                                       <th scope="col">Status</th>                                                  
                                     </tr>
                                   </thead>
                                   <tbody class="resOutputSvsBody">
                         
                                   </tbody>
                                 </table>
                               </div>
                             </div>
                            
                           </div>
                         </div>
                       </div>
                     </div>               
                  </div>
                  </div>
   
                
                
          
              </div>          
              
              </div>
            </div>
         </div>

</div>
<!--/.container-->
<!-- waiting list Modal -->
<div class="modal fade" id="waitlist" tabindex="-1" role="dialog" aria-labelledby="waitlistTitle" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-top modal-dialog-scrollable" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4>Patient Awaiting Dental Services</h4>
          <button type="button" class="btn-close btn-danger" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div> 
        <div class="modal-body">
            <div class="row">
                <div class="col-sm-12">
                    <div class="col-sm-8">
                        <div class="input-group input-group-sm mb-3">                                                            
                          <div class="input-group-prepend">
                            <input id="cl_patid" type="text" hidden>
                            <span class="input-group-text">Search by number/name</span>
                          </div> 
                          <input class="form-control form-control-sm" type="text" id="pCardNo" placeholder="Enter exact cardNo" aria-label="Search">
                            <small id="sttfind" class="text-danger"></small>
                        </div>
                      </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12" style="overflow-x:scroll;">
                    <table class="table table-sm" id="listTable">
                        <thead>
                            <th>Date</th>
                            <th>Patient Name</th>
                            <th>Card No</th>
                            <th>Age</th>
                            <th>Gender</th>
                            <th>Paymode</th>
                        </thead>
                        <tbody id="listTableBody">

                        </tbody>
                    </table>
                </div>
            </div>
            
  
        </div>       
      </div>
    </div>
  </div>
  <!--end of modal-->

<!-- Service request Modal -->
<div class="modal fade" id="serviceModal" tabindex="-1" role="dialog" aria-labelledby="servicemodalTitle" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-top" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 id="modal_header"></h4>
        <div class="alert hidden" role="alert" id="modalAlert"></div> 
        <button type="button" class="btn-close btn-danger" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div> 
      <div class="modal-body">
        <div class="row">
          <div class="col-md-12">
            <div class="form-group">                    
              <input class="form-control" type="text" id="search_service" placeholder="service to order"> 
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            
            <table class="table table-hover" id="resultTable">
              <thead>
                <tr>                     
                  <th scope="col">Service Name</th>
                  <th scope="col">Normal Rate</th> 
                  <th scope="col">Special Rate</th>                    
                  <th scope="col">Department</th>                    
                </tr>
              </thead>
              <tbody class="resultTableBody">
    
              </tbody>
            </table>
          </div>
        </div>
      </div>       
    </div>
  </div>
</div>
<!--end of modal-->


<!-- Pharmacy request Modal -->
<div class="modal fade" id="pharmacyModal" tabindex="-1" role="dialog" aria-labelledby="pharmacymodalTitle" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-top modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 id="modal_header"></h4>
        <div class="alert hidden" role="alert" id="modalAlert"></div> 
        <button type="button" class="btn-close btn-danger" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div> 
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-4">
            <div class="form-group">
              <select name="" id="prescstore" class="form-control">
                <option value="none">Pharmacy Outlet</option>
                {% for st in stores %}
                <option value="{{st.store_Id}}">{{st.store_name}}</option>
                {%endfor%}
              </select>
            </div>
          </div>
          <div class="col-md-8">
            <div class="form-group">                    
              <input class="form-control" type="text" id="search_pharmacy" placeholder="Drug/item to order"> 
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            
            <table class="table table-hover" id="pharSearchTb">
              <thead>
                <tr>                     
                  <th scope="col">Item Name</th> 
                  <th scope="col">cash</th> 
                  <th scope="col">scheme</th>                   
                  <th scope="col">Available</th>                                     
                </tr>
              </thead>
              <tbody class="pharSearchTbBody">
    
              </tbody>
            </table>
          </div>
        </div>
      </div>       
    </div>
  </div>
</div>

<!--end of modal-->

<!-- Admision alert Modal -->
<div class="modal fade" id="admissionModal" tabindex="-1" role="dialog" aria-labelledby="paymodalTitle" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4>Special clinic Request</h4>
        <button type="button" class="btn-close btn-danger" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div> 
      <div class="modal-body">

      </div>       
    </div>
  </div>
</div>
<!--end of modal-->
<script src="{% static 'js/cons_dental.js' %}"></script>
  
<!--footer.html-->
{% include 'partials/footer.html' %}
{% endblock%}